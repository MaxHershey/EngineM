var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Invader = (function (_super) {
    __extends(Invader, _super);
    function Invader(game, center) {
        _super.call(this);
        this.game = game;
        this.center = center;
        this.width = 15;
        this.height = 15;
        this.speedX = 0.3;
        this.patrolX = 0;
    }
    Invader.prototype.update = function () {
        if (this.patrolX < 0 || this.patrolX > 40) {
            this.speedX = -this.speedX;
        }
        this.center.x += this.speedX;
        this.patrolX += this.speedX;
        if (Math.random() > 0.995 && !this.invadersBelow(this)) {
            var bullet = new Bullet({ x: this.center.x, y: this.center.y + this.width / 2 }, { x: Math.random() - 0.5, y: 2 });
            this.game.entities.push(bullet);
        }
    };
    Invader.prototype.invadersBelow = function (invader) {
        return this.game.entities.filter(function (b) {
            return b instanceof Invader &&
                b.center.y > invader.center.y &&
                b.center.x - invader.center.x < invader.width;
        }).length > 0;
    };
    return Invader;
})(EngineM.Entity);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludmFkZXIudHMiXSwibmFtZXMiOlsiSW52YWRlciIsIkludmFkZXIuY29uc3RydWN0b3IiLCJJbnZhZGVyLnVwZGF0ZSIsIkludmFkZXIuaW52YWRlcnNCZWxvdyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtJQUFzQkEsMkJBQWNBO0lBRWhDQSxpQkFBWUEsSUFBa0JBLEVBQUVBLE1BQXNCQTtRQUNsREMsaUJBQU9BLENBQUNBO1FBQ1JBLElBQUlBLENBQUNBLElBQUlBLEdBQUdBLElBQUlBLENBQUNBO1FBQ2pCQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxNQUFNQSxDQUFDQTtRQUNyQkEsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsRUFBRUEsQ0FBQ0E7UUFDaEJBLElBQUlBLENBQUNBLE1BQU1BLEdBQUdBLEVBQUVBLENBQUNBO1FBQ2pCQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxHQUFHQSxDQUFDQTtRQUNsQkEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDckJBLENBQUNBO0lBTU1ELHdCQUFNQSxHQUFiQTtRQUNJRSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxDQUFDQSxJQUFJQSxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNwQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDL0JBLENBQUNBO1FBRURBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLElBQUlBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBO1FBQzdCQSxJQUFJQSxDQUFDQSxPQUFPQSxJQUFJQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQTtRQUU1QkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsRUFBRUEsR0FBR0EsS0FBS0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDckRBLElBQUlBLE1BQU1BLEdBQUdBLElBQUlBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLE1BQU1BLEVBQUVBLEdBQUdBLEdBQUdBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1lBQ2xIQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQTtRQUNwQ0EsQ0FBQ0E7SUFDVEEsQ0FBQ0E7SUFFT0YsK0JBQWFBLEdBQXJCQSxVQUFzQkEsT0FBd0JBO1FBQzFDRyxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxNQUFNQSxDQUFDQSxVQUFTQSxDQUFDQTtZQUNuQyxNQUFNLENBQUMsQ0FBQyxZQUFZLE9BQU87Z0JBQzNCLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDN0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztRQUNsRCxDQUFDLENBQUNBLENBQUNBLE1BQU1BLEdBQUdBLENBQUNBLENBQUNBO0lBQ3RCQSxDQUFDQTtJQUNMSCxjQUFDQTtBQUFEQSxDQXJDQSxBQXFDQ0EsRUFyQ3FCLE9BQU8sQ0FBQyxNQUFNLEVBcUNuQyIsImZpbGUiOiJpbnZhZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgSW52YWRlciBleHRlbmRzIEVuZ2luZU0uRW50aXR5IHtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoZ2FtZTogRW5naW5lTS5HYW1lLCBjZW50ZXI6IEVuZ2luZU0uSVBvaW50KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xyXG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSAxNTtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDE1O1xyXG4gICAgICAgIHRoaXMuc3BlZWRYID0gMC4zO1xyXG4gICAgICAgIHRoaXMucGF0cm9sWCA9IDA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBnYW1lOiBFbmdpbmVNLkdhbWU7XHJcbiAgICBwdWJsaWMgcGF0cm9sWDogbnVtYmVyO1xyXG4gICAgcHVibGljIHNwZWVkWDogbnVtYmVyO1xyXG4gICAgXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnBhdHJvbFggPCAwIHx8IHRoaXMucGF0cm9sWCA+IDQwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwZWVkWCA9IC10aGlzLnNwZWVkWDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5jZW50ZXIueCArPSB0aGlzLnNwZWVkWDtcclxuICAgICAgICAgICAgdGhpcy5wYXRyb2xYICs9IHRoaXMuc3BlZWRYO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjk5NSAmJiAhdGhpcy5pbnZhZGVyc0JlbG93KHRoaXMpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnVsbGV0ID0gbmV3IEJ1bGxldCh7IHg6IHRoaXMuY2VudGVyLngsIHk6IHRoaXMuY2VudGVyLnkgKyB0aGlzLndpZHRoIC8gMn0sIHsgeDogTWF0aC5yYW5kb20oKSAtIDAuNSwgeTogMiB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5lbnRpdGllcy5wdXNoKGJ1bGxldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBpbnZhZGVyc0JlbG93KGludmFkZXI6IEVuZ2luZU0uSUVudGl0eSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdhbWUuZW50aXRpZXMuZmlsdGVyKGZ1bmN0aW9uKGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiIGluc3RhbmNlb2YgSW52YWRlciAmJlxyXG4gICAgICAgICAgICAgICAgYi5jZW50ZXIueSA+IGludmFkZXIuY2VudGVyLnkgJiZcclxuICAgICAgICAgICAgICAgIGIuY2VudGVyLnggLSBpbnZhZGVyLmNlbnRlci54IDwgaW52YWRlci53aWR0aDtcclxuICAgICAgICAgICAgfSkubGVuZ3RoID4gMDtcclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
